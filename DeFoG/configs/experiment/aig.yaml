# @package _global_
general:
  gpus: 1
  wandb: 'online' # Or 'disabled' or 'offline'

  resume: null            # Path to checkpoint if resuming training
  test_only: null         # Path to checkpoint for testing only

  check_val_every_n_epochs: 1000 # How often to run validation
  sample_every_val: 1         # Run sampling every time validation runs

  # Logging and Saving during training/validation
  samples_to_generate: 100   # Number of graphs to generate during validation/sampling steps
  samples_to_save: 0      # Number of generated graph visualizations to save
  chains_to_save: 0         # Number of generation process GIFs to save

  # For final evaluation after training or with test_only
  final_model_samples_to_generate: 1000 # Generate more samples for robust final metrics
  final_model_samples_to_save: 20
  final_model_chains_to_save: 5
  save_samples: True        # Save generated samples as files at the end of testing

  # Conditional generation (set to True if your AIGs have labels you want to condition on)
  conditional: False
  sample_steps: 1000
  # target: 'your_aig_label_key' # if conditional is True
  # guidance_weight: 2.0          # if conditional is True (typical value from paper)

train:
  n_epochs: 1000000           # Start with a moderate number, adjust based on convergence
  batch_size: 256             # Adjust based on your AIG sizes and GPU memory
  lr: 0.0002                  # Default learning rate
  clip_grad: null             # Gradient clipping (e.g., 1.0) if needed
  save_model: True            # As requested
  ema_decay: 0.999            # Exponential Moving Average decay (0 means off)

  time_distortion: 'polydec'

sample:
  time_distortion: 'polydec'
  omega: 0.0
  eta: 0.0



model:
  n_layers: 10
  hidden_mlp_dims: { 'X': 128, 'E': 64, 'y': 128 }
  hidden_dims: {
    'dx': 256,
    'de': 64,
    'dy': 64,
    'n_head': 8,
    'dim_ffX': 256,
    'dim_ffE': 128,
    'dim_ffy': 128
  }

# The following line was removed or commented out:
# dataset: aig # This will load configs/dataset/aig.yaml

# If you need the experiment to explicitly set the dataset, use the following 'defaults' structure instead:
# defaults:
#   - override /dataset: aig